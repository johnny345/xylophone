
<!-- index-newer.html  color only active when key is pressed -->

<!-- couldn't get rid of clicking noise when iphone key was pressed.  Try iPad? -->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Xylophone</title>
  <style>
    .xylophone {
      display: flex;
    }

    .note {
      flex: 1;
      height: 100px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: silver;
      transition: background-color 0.2s ease;
    }

    .note.active[data-note="C"] {
      background-color: maroon;
    }

    .note.active[data-note="D"] {
      background-color: teal;
    }

    .note.active[data-note="E"] {
      background-color: purple;
    }

    .note.active[data-note="F"] {
      background-color: fuchsia;
    }

    .note.active[data-note="G"] {
      background-color: aqua;
    }

    .note.active[data-note="A"] {
      background-color: lime;
    }

    .note.active[data-note="B"] {
      background-color: yellow;
    }

    div {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    p {
      color: red;
      font-weight: bold;
    }
  </style>
</head>

<body>

  <div class="xylophone">
    <div class="note" data-note="C">
      <p>C</p>
    </div>
    <div class="note" data-note="D">
      <p>D</p>
    </div>
    <div class="note" data-note="E">
      <p>E</p>
    </div>
    <div class="note" data-note="F">
      <p>F</p>
    </div>
    <div class="note" data-note="G">
      <p>G</p>
    </div>
    <div class="note" data-note="A">
      <p>A</p>
    </div>
    <div class="note" data-note="B">
      <p>B</p>
    </div>
  </div>

  <script>
    const notes = document.querySelectorAll('.note');
    const audioContext = new AudioContext();

    const noteFrequencies = {
      C: 261.63,
      D: 293.66,
      E: 329.63,
      F: 349.23,
      G: 392.00,
      A: 440.00,
      B: 493.88
    };

    notes.forEach(note => {
      note.addEventListener('click', () => {
        const noteName = note.getAttribute('data-note');

        const oscillator = audioContext.createOscillator();
        oscillator.frequency.setValueAtTime(noteFrequencies[noteName], audioContext.currentTime);

        const gainNode = audioContext.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();

        note.classList.add('active');

        setTimeout(() => {
          oscillator.stop();
          note.classList.remove('active');
        }, 750);
      });
    });
  </script>

</body>
</html>
